+++
title = "ğŸ“Clojure é–‹ç™ºç’°å¢ƒ"
tags = ["WIKI"]
draft = false
+++

tags: [ğŸ·Clojure]({{< relref "20211111225741.md" >}})

Clojureé–‹ç™ºã‚’ã™ã‚‹ã¨ãã®é–‹ç™ºç’°å¢ƒ(DX)å‘ä¸Šã®ã‚ã‚Œã“ã‚Œ.

ä¸»ã«Clojureé–‹ç™ºã«é–¢ã‚ã‚‹ãƒ„ãƒ¼ãƒ«ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¾ã¨ã‚.

-   RDDã¯ã“ã¡ã‚‰:  [ğŸ“Clojure REPL Driven Development]({{< relref "20220117205249.md" >}})
-   Debugã¯ã“ã¡ã‚‰: [ğŸ“Clojure ãƒ‡ãƒãƒƒã‚°]({{< relref "20220309085644.md" >}})
-   Emacsã«ç‰¹åŒ–ã—ãŸã‚‚ã®ã‚’åˆ¥ãƒãƒ¼ãƒˆã«ç§»å‹•: [ğŸ“Cljure é–‹ç™ºç’°å¢ƒ with Emacs]({{< relref "20220316151158.md" >}})
-   ClojureScriptã¯ã“ã£ã¡: [ğŸ“ClojureScripté–‹ç™ºç’°å¢ƒ]({{< relref "20220519173243.md" >}})

up: [ğŸ“‚Clojure Development]({{< relref "20220211141917.md" >}})


## Leiningen - Clojure Build tool {#leiningen-clojure-build-tool}

<https://github.com/technomancy/leiningen>

Clojureãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†ãƒ„ãƒ¼ãƒ«. makeçš„ãª.


### howto: Javaå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã„ã‚Œã‚‹ã«ã¯ï¼Ÿ {#howto-javaå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã„ã‚Œã‚‹ã«ã¯}

[<groupId>/<artifactId> <version>] ã¨ã„ã†è¨˜æ³•ã§project.cljã®dependenciesã«è¿½åŠ .

---

ã“ã‚ŒãŒ,

```xml
<dependency>
  <groupId>com.google.cloud</groupId>
  <artifactId>google-cloud-firestore</artifactId>
  <version>3.0.2</version>
</dependency>
```

ã“ã†ãªã‚‹.

```clojure
[com.google.cloud/google-cloud-firestore "3.0.2"]
```


### howto: lein uberjarã§The Main-Class specified does not exist within the jar {#howto-lein-uberjarã§the-main-class-specified-does-not-exist-within-the-jar}

main ã® core.cljã®nsã«(:gen-class)ã‚’è¿½åŠ .

> Warning: The Main-Class specified does not exist within the jar. It may not be
executable as expected. A gen-class directive may be missing in the namespace
which contains the main method, or the namespace has not been AOT-compiled.


### tips: project.cljã«ãƒ“ãƒ«ãƒ‰ç”¨è¨­å®šã®ã¿æ›¸ã„ã¦è¨­å®šæƒ…å ±ã¯environã‚„configã‚’ã¤ã‹ã† {#tips-project-dot-cljã«ãƒ“ãƒ«ãƒ‰ç”¨è¨­å®šã®ã¿æ›¸ã„ã¦è¨­å®šæƒ…å ±ã¯environã‚„configã‚’ã¤ã‹ã†}

ã‚ˆã„.

ref: <https://twitter.com/t_yano/status/1163413764827303937>


## Clojure CLI tools.deps - Clojure Build tool {#clojure-cli-tools-dot-deps-clojure-build-tool}

<https://clojure.org/reference/deps_and_cli>

-   leiningenã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã§ã‚ã‚‹ã“ã¨ãŒç‰¹å¾´.
    -   åŸºæœ¬çš„ã«ã¯ paths/dependencies/aliasesã ã‘è¦šãˆã‚Œã°åŸºæœ¬ã¯ã§ãã‚‹.
    -   leiningenã‚ˆã‚Šå­¦ç¿’ã‚³ã‚¹ãƒˆã¯ä½
    -   cljã‚³ãƒãƒ³ãƒ‰ã§REPLèµ·å‹•.
    -   clojureã‚³ãƒãƒ³ãƒ‰ã§ .cljãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œ.
-   deps.ednãƒ•ã‚¡ã‚¤ãƒ«ã§è¨˜è¿°.
    -   pathsã«clojureã®ã‚³ãƒ¼ãƒ‰ã®rootã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã‚’è¨˜è¿°.
    -   dependenciesã«ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¨˜è¿°.
    -   aliasesã«custom command ã‚’è¨˜è¿°.
        -   ãŸã¨ãˆã° clj (-X/-M/-A):hogehoge ã¨ã„ã†ã‚ˆã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ°—è»½ã«å®šç¾©ã§ãã‚‹.
        -   npxã®ã‚ˆã†ãªcommand runnerã¨ã—ã¦ã¤ã‹ãˆã‚‹ã‹ãªï¼Ÿï¼Ÿ
-   Rich HickeyãŒã“ã‚Œã‹ã‚‰ç†±æ„ã‚’å…¥ã‚ŒãŸã„ã¨ã‹.
    -   2022ã§ãƒ¡ã‚¸ãƒ£ãƒ¼ãªã®ã¯leiningenã§ã‚ã‚‹ã‚‚ã®ã®ã“ã‚Œã‹ã‚‰é€†è»¢ã®å¯èƒ½æ€§ã¯ã‚ã‚‹.
        -   ä½“æ„Ÿã§deps.ednã®GitHub repoã¯å¢—ãˆã¦ã„ã‚‹.


### ğŸ“tools.build - Clojureãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ« {#tools-dot-build-clojureãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«}

jar/uberjarã®ä½œæˆã«ã¯ tools.buildã‚’ã¤ã‹ã†ã®ãŒä»Šé¢¨(2022~)

-   <https://github.com/clojure/tools.build>
-   <https://clojure.org/guides/tools_build>

refs:

-   <https://clojure.org/news/2021/07/09/source-libs-builds>
-   <https://github.com/seancorfield/depstar> (~2021)
-   [fogus: Clojure builds as an amalgamation of orthogonal parts](http://blog.fogus.me/2021/07/20/clojure-builds-as-an-amalgamation-of-orthogonal-parts/)
    -   <https://twitter.com/athos0220/status/1417640780303278082>
    -   <https://twitter.com/athos0220/status/1411258058265694216>


### tools.tools {#tools-dot-tools}

ä»–äººã®ã¤ãã£ãŸlibã‚’Clojure CLI ifã«ç°¡å˜ã«çµ„ã¿è¾¼ã‚€ã“ã¨ãŒã§ãã‚‹.

-   <https://github.com/clojure/tools.tools>
-   [Clojure - Using named tools](https://clojure.org/reference/deps_and_cli#_using_named_tools)


### tip. GitHubã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‚ç…§ã™ã‚‹ã«ã¯ï¼Ÿ {#tip-dot-githubã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å‚ç…§ã™ã‚‹ã«ã¯}

mvn/versionã§ã‚¿ã‚°ã‚’å‚ç…§ã™ã‚‹ã®ã§ã¯ãªã(ãƒã‚°ä¿®æ­£ã¨ã‹ã§)æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã„ãŸã„ã¨ãã®tip.

{:deps }ã®ä¸­ã§, io.github.(user)/(project) ãŒkey, {:git/sha "xx"}ãŒ
valueã§å®£è¨€ã™ã‚‹.

```clojure
io.github.dm3/clojure.java-time
  {:git/sha "693dffad2343cd9722482a5f200efe75dfbfbd31"}
```


### ğŸ”—References {#references}

-   [Clojure + deps.edn, a basic guide | Tomek WaÅ‚kuski](https://tomekw.com/clojure-deps-edn-a-basic-guide/)
-   [clojure CLI (tools.deps)ã‚’ä½¿ã„ã‚„ã™ãã™ã‚‹ãŸã‚ã®Tips - Qiita](https://qiita.com/k2nakamura/items/03eed17a06a4b963dac5)
-   [Clojure CLIã§Clojarsã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ - Qiita](https://qiita.com/totakke/items/e20405be6c2cf55ec9ac)


## cljstyle - Clojureãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ {#cljstyle-clojureãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿}

Clojureãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿.

å…ˆç™ºã®cljfmtã¯leiningenç¸›ã‚Š. cljstyleã¯ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒã‚¤ãƒŠãƒªã¨ã—ã¦å‹•ä½œã™ã‚‹.

-   <https://github.com/greglook/cljstyle>
-   [Clojureã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼cljstyleã®ä½¿ã„æ–¹ - TOYOKUMO Tech Blog](https://tech.toyokumo.co.jp/entry/format-clojure-code-using-cljstyle)
-   [Clojureé–‹ç™ºç’°å¢ƒã§ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼cljstyleè¨­å®šã¾ã¨ã‚ - Qiita](https://qiita.com/lagenorhynque/items/a5d83b4a36a1cf1cacbe)
-   [Clojure formatting with cljstyle | Andrey Bogoyavlensky](https://bogoyavlensky.com/blog/clojure-formatting-cljstyle/)

ä»¥ä¸‹, Doom Emacsã®è¨­å®šä¾‹. format-allã¨ã„ã†packageã®
clojure custom formatterã¨ã—ã¦cljstyleã‚’è¨­å®šã—ã¦,
ä¿å­˜æ™‚ã«ãƒ•ãƒƒã‚¯ã§ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒèµ°ã‚‹ã‚ˆã†ã«ã™ã‚‹.

```emacs-lisp
(add-hook! clojure-mode
  (set-formatter! 'cljstyle "cljstyle pipe" :modes '(clojure-mode))
  (add-hook 'before-save-hook 'format-all-buffer t t))
```

ref: [ğŸ·Formatter]({{< relref "20220316182358.md#formatter" >}}) [ğŸ“Clojureã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„]({{< relref "20220313110515.md" >}})


## clj-kondo - Clojure Lintãƒ„ãƒ¼ãƒ« {#clj-kondo-clojure-lintãƒ„ãƒ¼ãƒ«}

Clojure ãƒªãƒ³ã‚¿ãƒ¼. Clojureç”¨ã®é™çš„è§£æãƒ„ãƒ¼ãƒ«.

ã‚¹ã‚¿ãƒ³ãƒ‰ã‚¢ãƒ­ãƒ³ãƒã‚¤ãƒŠãƒªã¨ã—ã¦å‹•ä½œã™ã‚‹ã®ã§leiningenã‚„REPLã«ä¾å­˜ã—ãªã„.

-   <https://github.com/clj-kondo/clj-kondo>
-   [Clojureé–‹ç™ºç’°å¢ƒã§ã®ãƒªãƒ³ã‚¿ãƒ¼clj-kondo, Jokerè¨­å®šã¾ã¨ã‚ - Qiita](https://qiita.com/lagenorhynque/items/dd9d6a1d97cbea738bc0)
-   [clj-kondo Hookså…¥é–€](https://zenn.dev/uochan/articles/2020-12-09-clj-kondo-hooks)
-   <https://github.com/borkdude/flycheck-clj-kondo>
-   [Live Linting Â· Clojure development with Spacemacs & Cider](https://practical.li/spacemacs/improving-code/live-linting.html)

ref: [ğŸ·Linter]({{< relref "20220316182358.md#linter" >}})
