+++
title = "ğŸ“Clojure Product Development"
tags = ["WIKI"]
draft = false
+++

up: [ğŸ“‚Clojure Development]({{< relref "20220211141917.md" >}}) tags: [ğŸ·Clojure]({{< relref "20211111225741.md" >}})

Clojureãƒ—ãƒ­ãƒ€ã‚¯ãƒˆé–‹ç™ºã§å½¹ç«‹ã¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¾ã¨ã‚.

å¿…è¦ã«å¿œã˜ã¦ãƒˆãƒ”ãƒƒã‚¯ã”ã¨ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã™ã‚‹ã“ã¨.

-   refs:
    -   [ğŸ“Clojure Web Development]({{< relref "20220118092453.md" >}}) => Webé–¢ä¿‚ã¯ã“ã£ã¡
    -   [ğŸ“Clojure API Client Development]({{< relref "20220209102028.md" >}}) => Client APIé–¢ä¿‚ã¯ã“ã£ã¡
    -   [ğŸ“Clojure Style Rules & Conventions]({{< relref "20220313110515.md" >}}) => ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ã‚„æ…£ç¿’ã¯ã“ã£ã¡
    -   [ğŸ“Clojure Architecture]({{< relref "20220314120812.md" >}}) => è¨­è¨ˆå‘¨ã‚Š


## Clojure: Backend Framework {#697917}


### Clojure: Duct {#d8c00c56-21de-485d-af41-01f920cd7c7f}

-   <https://github.com/duct-framework>
    -   <https://github.com/duct-framework/core>

[Integrant]({{< relref "20220531084041.md" >}}) ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸæ‹¡å¼µæ©Ÿèƒ½ã‚’æä¾›(ä½œè€…ãŒåŒã˜). Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ãªãã‚‚ã£ã¨æ±ç”¨çš„ãªã‚‚ã®.

-   [Ductãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å…¥é–€](https://www.slideshare.net/KentOhashi/duct-module-getting-started)
-   [ã¯ã˜ã‚ã¦ã®Duct - Uzabase for Engineers](https://tech.uzabase.com/entry/2018/04/03/115236)
-   [Document how to use duct with tools.deps - GitHub](https://github.com/duct-framework/duct/issues/92)


### Clojure: Roll {#21f47f3d-586b-4b9b-a42a-b5cc9d04b913}

<https://github.com/dimovich/roll>

backend for Clojure. Ductã‚ˆã‚Šã‚‚ã•ã‚‰ã«ã‚·ãƒ³ãƒ—ãƒ«, integrantãŒãƒ™ãƒ¼ã‚¹.


## Clojure: çŠ¶æ…‹ç®¡ç†ã¨ã‚·ã‚¹ãƒ†ãƒ  {#497a8160-d192-45db-aa0c-84b9a2442861}

ã„ã‚ã„ã‚ã‚ã‚‹ãŒãƒŠã‚¦ã„ã®ã¯Integrantã‹ãªï¼Ÿ

-   [stuartsierra/component](https://github.com/stuartsierra/component)
-   [tolitius/mount](https://github.com/tolitius/mount)
-   [ğŸ“Clojure Integrant]({{< relref "20220531084041.md" >}})

çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã¯é–¢æ•°å‹ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ å›ºæœ‰ã®ã‚‚ã®ã‹ãªï¼Ÿ Reduxçš„ãª.


### Clojure: Component {#df5f054f-57e7-441a-a196-f65bb8b478fb}

[Stuart Sierra]({{< relref "20220320182327.md" >}}) ä½œ.


### ãã‚‚ãã‚‚ã‚·ã‚¹ãƒ†ãƒ ã¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã¯ {#284f08}

ã‚·ã‚¹ãƒ†ãƒ ã¯ãã‚‚ãã‚‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒé•·ã„é–“èµ·å‹•ã—ã¦ã„ã‚‹ã¨ãã«å¿…è¦ã¨ãªã‚‹è€ƒãˆ. ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚„ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®å®Ÿè¡Œã§ã¯å¿…è¦ãªã„ã®ã . ãã‚Œã‚‰ã¯å‡¦ç†ã®çµ‚äº†ãŒãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®çµ‚äº†ã§ã‚ã‚Šãƒªã‚½ãƒ¼ã‚¹ã®é–‹æ”¾ã§ã‚ã‚‹.

ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å®Ÿè¡Œã‚’ã—ç¶šã‘ã‚‹éƒ¨åˆ†ã§æ§‹æˆã•ã‚Œã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³, ãã®éƒ¨åˆ†ãŒä¾å­˜é–¢ä¿‚ã«ã‚ã‚ŠåˆæœŸåŒ–æ™‚ã«é–¢ä¿‚ã‚’æ§‹ç¯‰ã™ã‚‹ã‚‚ã®, ã“ã‚ŒãŒã‚·ã‚¹ãƒ†ãƒ .

ã‚·ã‚¹ãƒ†ãƒ æ§‹ç¯‰ã™ã‚‹éƒ¨å“=ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯å˜ç´”åŒ–ã™ã‚Œã°, On/Offã®æ“ä½œã«ã‚ˆã‚‹StatefulãªObjectã§ã‚ã‚‹.

ref: [Systems in Clojure](https://grishaev.me/en/clj-book-systems/)


## Clojure FSM {#1401c497-200e-4f4a-a01c-1ce372308804}

Clojureã«ãŠã‘ã‚‹[Finite State Machine]({{< relref "20220309185051.md#7aa7446c-e036-4744-a27a-493056fd7268" >}})ã®å®Ÿç¾æ–¹æ³•ã¾ã¨ã‚.

çŠ¶æ…‹é·ç§»ã¯æ‰‹ç¶šãçš„ã«å‡¦ç†ã™ã‚‹ã®ãªã‚‰ã°loopã®ãªã‹ã«ifã¨switchã®ãŠã°ã‘ã‚’ã‹ã‘ã°ã„ã„ã®ã ã‘ã‚Œã©ã‚‚Clojureã‚’æ›¸ã„ã¦ã„ã¦ãã‚Œã¯ã‚ã¾ã‚Šã«ã‚‚æ‚²ã—ã„ã®ã§ã‚‚ã£ã¨å®£è¨€çš„ãªæ–¹æ³•ã‚’æ¢ã™.

[trampoline](https://clojuredocs.org/clojure.core/trampoline)ã¨ã„ã†Clojureã®é–¢æ•°ã§çŠ¶æ…‹é·ç§»ã‚’è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã‚‹.

ã‚‚ã—ãã¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ´»ç”¨. ãƒ¡ãƒ³ãƒ†ãŒãŠã‚ã£ã¦ã„ã‚‹æœ‰åãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ [reduce-fsm](https://github.com/cdorrat/reduce-fsm), ä»£æ›¿ã¯ [tilakone](https://github.com/metosin/tilakone)ã ã‘ã©2022å¹´ã“ã‚Œã‚‚çµ‚ã‚ã£ã¦ãã†... è‡ªä½œãŒã„ã„ã®ã‹ãª... ãƒ‘ãƒƒãƒˆè¦‹, æ˜”ã«é–‹ç™ºã•ã‚ŒãŸã‘ã©ã‚‚ã†ä½¿ã‚ã‚Œã¦ãªã„ã‚‚ã®ãŒå¤šã„æ°—ãŒã™ã‚‹.

Clojure Statecharts Libraryã¯ãƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ã‚‹ãª.

-   <https://github.com/fulcrologic/statecharts>
-   <https://github.com/lucywang000/clj-statecharts>


### ğŸ’¡çŠ¶æ…‹ã¯ keywordã§è¡¨ç¾ã™ã‚‹ {#dba0d8}

ã„ã‚ã„ã‚ãªä¾‹ã‚’ã¿ãŸæ„Ÿæƒ³ãªã®ã§ä¸€èˆ¬çš„ã§ã¯ãªã„.

çŠ¶æ…‹ã¯keywordã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¤šã„, ã¨ãã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç³»ã¯.

ã¯ã˜ã‚ã¯æ–‡å­—åˆ—ã§å®šç¾©ã—ã¦å¤§æ–‡å­—ã®å¤‰æ•°ã«bindã™ã‚‹ã®ã‹ã¨æ€ã£ãŸ. Clojureã«ãŠã„ã¦ã¯defaultãŒå®šæ•°ãªãŸã‚, å®šæ•°ã®ãŸã‚ã®ç‰¹åˆ¥ãªè¡¨è¨˜ã¯ã—ãªã„.


### References {#d95867}

[[Clojure]trampolineã‚’ç†è§£ã™ã‚‹ - Qiita](https://qiita.com/Haar/items/6f46dcf8ef58d16ec4aa)


## Clojure: ãƒ­ã‚®ãƒ³ã‚°(Logging) {#fc3521e8-72f6-4416-83b2-067344374a9a}

Javaã®è³‡ç”£ã‚’ä½¿ã†ã‹å¦ã‹ãŒæ¡ç”¨ã®ãƒã‚¤ãƒ³ãƒˆã‹ãªï¼ŸJavaã®ãƒ­ã‚®ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯æ­´å²ãŒã‚ã‚‹.

timbreã¯pure clojureã§ã¯ã‚ã‚‹ãŒ, ã‚„ã¯ã‚Šè¨­å®šä¾‹ã‚„ãƒã‚¦ãƒã‚¦ãŒGoogleæ¤œç´¢ã§è¦‹ã¤ã‹ã‚‹ã®ã¯, Javaãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå¤šã„(logback).


### clojure.tools.logging {#72b25d3f-8637-4735-960b-c44af8418aa2}

clojure tools.logging libaryã§Javaã®è³‡ç”£ã‚’æ´»ç”¨.

-   official docs
    -   <https://github.com/clojure/tools.logging>
    -   <https://clojure.github.io/tools.logging/>

---

-   ref:
    -   [ğŸ–ŠLogbackã®ãƒ­ã‚°ã‚’è¦‹ã‚„ã™ãã™ã‚‹æ–¹æ³•(ãƒ•ã‚¡ã‚¤ãƒ«ã‚’grep, Lilith) | Futurismo](https://futurismo.biz/archives/6825/)
    -   [Quickly Set up Clojure Logging with the Right Library](https://spin.atomicobject.com/2015/05/11/clojure-logging/)
    -   [Clojure Log Configuration](https://www.solasistim.net/posts/clojure_log_configuration/)


#### unilog {#d25f6e}

clojure.tools.loggingã®è¨­å®šã‚’ã‹ã‚“ãŸã‚“ã«ã™ã‚‹. ãƒ­ã‚®ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãã®ã‚‚ã®ã§ãªã„.

ref. <https://github.com/pyr/unilog>

-


### Clojure: timbre {#c0af56ee-9d64-4846-9b1b-3f49881a3801}

Pure Clojure/Script logging library.

[GitHub - ptaoussanis/timbre: Pure Clojure/Script logging library](https://github.com/ptaoussanis/timbre)

[slf4j-timbre](https://github.com/fzakaria/slf4j-timbre) ã‚’ã¤ã‹ã†ã¨Javaã®ãƒ­ã‚®ãƒ³ã‚°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨é€£æºå¯èƒ½.

æ—¥æœ¬ã®æ™‚åˆ»è¨­å®šä¾‹:

```clojure
(def timbre-config
  {:timestamp-opts
   {:pattern  "yyyy-MM-dd HH:mm:ss,SSS"
    :locale   (java.util.Locale. "ja_JP")
    :tiemzone (java.util.TimeZone/getTimeZone "Asia/Tokyo")}})
(timbre/merge-config! timbre-config)
```

ã¾ãŸç¾å®Ÿçš„ãªå•é¡Œç‚¹ã¨ã—ã¦, timbreã¯pure clojureã§ã¯ã‚ã‚‹ã‚‚ã®ã®, 3rd party libraryãŒjavaã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ä¾å­˜ã—ã¦ã„ã‚‹ã¨,ãã®åˆ¶å¾¡ã‚’timbreã‹ã‚‰ã¯ã§ããªã„(Javaã‹ã‚‰ç‹¬ç«‹ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ©ç‚¹ãªã®ã§). ãã®ãŸã‚çµå±€ logback.xmlã‚’æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã‹ã‚‚ã—ã‚Œãªã„.

<https://github.com/ptaoussanis/timbre/issues/138>

(ãªã‚“ã‹cider-nreplã¨ã®ç›¸æ€§ãªã®ã‹ CIDEEç’°å¢ƒã§errorãŒå‹•ä½œã—ãªã„. ã“ã‚Œã¯stderrã®æ‰±ã„ã‹ã‚‚ã—ã‚Œãªã„).


### Cambium {#e746da}

better timbreã¨ã‹.

[Cambium Home - Structured logging for Clojure | Cambium](https://cambium-clojure.github.io/)


### <span class="org-todo todo _">ğŸ’¡</span> tips: Jetty ã‚µãƒ¼ãƒã®ãƒ­ã‚°ã‚’é»™ã‚‰ã›ã‚‹ {#3f41ba}

jetty serverã‚’èµ·å‹•ã—ãŸã‚Šclj-httpã‚’ä½¿ã†ã¨REPLã‚’ä¾µé£Ÿã™ã‚‹å•é¡Œ.

ä»¥ä¸‹ã¯logback.xmlã‚’è¨­å®šã™ã‚‹ä¾‹.

-   [Pedestalã®ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ãŒã†ã‚‹ã•ã„ã®ã§ã€é™ã‹ã«ã—ãŸ - ayato-p](https://scrapbox.io/ayato-p/Pedestal%E3%81%AE%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E3%83%AD%E3%82%B0%E3%81%8C%E3%81%86%E3%82%8B%E3%81%95%E3%81%84%E3%81%AE%E3%81%A7%E3%80%81%E9%9D%99%E3%81%8B%E3%81%AB%E3%81%97%E3%81%9F)
    -   <https://twitter.com/_ayato_p/status/1115059001459335168>
-   [Basic logging in Clojure web service not appearing on console - Stack Overflow](https://stackoverflow.com/questions/31371993/basic-logging-in-clojure-web-service-not-appearing-on-console)

timbre

-   [Noisy Netty logs show up after adopting this library Â· Issue #32 Â· fzakaria/slf4j-timbre Â· GitHub](https://github.com/fzakaria/slf4j-timbre/issues/32)


## References {#d95867}

-   [The Clojure Toolbox](https://www.clojure-toolbox.com/)
    -   é€†å¼•ãã®Clojure Libraryã¾ã¨ã‚ãƒšãƒ¼ã‚¸.
