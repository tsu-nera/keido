+++
title = "ğŸ“ã‚·ã‚¹ãƒ†ãƒ åˆ¶å¾¡ãƒ‘ã‚¿ãƒ¼ãƒ³"
tags = ["WIKI"]
draft = false
+++

ä¿¡é ¼æ€§ã«é–¢ã‚ã‚‹è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚.

ã‚ãŸã—ãŒã‹ã¤ã¦Fé€šã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚·ã‚¹ãƒ†ãƒ ã®ã‚·ã‚¹ãƒ†ãƒ åˆ¶å¾¡ãƒãƒ¼ãƒ ã¨ã—ã¦å‘½ã‚’è³­ã‘ãŸ(= çˆ†æ­»)é ˜åŸŸ.

up: [ğŸ“‚ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢è¨­è¨ˆ]({{< relref "20220220102258.md" >}})


## Fault tolerant {#fault-tolerant}

ãƒ•ã‚©ãƒ¼ãƒ«ãƒˆãƒˆãƒ¬ãƒ©ãƒ³ãƒˆ.

-   [ãƒ•ã‚©ãƒ¼ãƒ«ãƒˆãƒˆãƒ¬ãƒ©ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ  - Wikipedia](http://ja.wikipedia.org/wiki/%E3%83%95%E3%82%A9%E3%83%BC%E3%83%AB%E3%83%88%E3%83%88%E3%83%AC%E3%83%A9%E3%83%B3%E3%83%88%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0)

æ§‹æˆéƒ¨å“ã®ä¸€éƒ¨ãŒæ•…éšœã—ã¦ã‚‚æ­£å¸¸ã«å‡¦ç†ã‚’ç¶šè¡Œã™ã‚‹ã“ã¨.


### Fault tolerant ã®æ¡ä»¶ {#fault-tolerant-ã®æ¡ä»¶}

Wikipedia ã‚ˆã‚Š.

1 å˜ä¸€éšœå®³ç‚¹ãŒãªã„ã“ã¨ (éšœå®³ã«å¯¾ã—ã¦å…¨ä½“ã®éšœå®³ã¨ãªã‚‰ãªã„ã‚ˆã†å¯¾ç­–ãŒæ–½ã•ã‚Œã¦ã„ã‚‹ã“ã¨))
2 å˜ä¸€æ•…éšœç‚¹ãŒãªã„ã“ã¨ (ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æ•…éšœã«ã¤ã„ã¦ã‚‚åŒæ§˜)
3 éšœå®³éƒ¨å“ã®éš”é›¢ãŒã§ãã‚‹ã“ã¨ (éƒ¨åˆ†ç¸®é€€)
4 éšœå®³ã®ä¼æ’­ã‚’é˜²ãã“ã¨
5 ä»£æ›¿ãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚‹ã“ã¨


### dependable system {#dependable-system}

é«˜ä¿¡é ¼ã‚·ã‚¹ãƒ†ãƒ . ä»¥ä¸‹ã®è¦æ±‚ã‚’æº€ãŸã™.

-   å¯ç”¨æ€§ ... ã‚·ã‚¹ãƒ†ãƒ ãŒã™ãã«ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã„ã†æ€§è³ª.
-   ä¿¡é ¼æ€§ ... ã‚·ã‚¹ãƒ†ãƒ ãŒéšœå®³ã‚’ãŠã“ã™ã“ã¨ãªãå®Ÿè¡Œã—ã¤ã¥ã‘ã‚‹æ€§è³ª.
-   å®‰å…¨æ€§ ... ã‚·ã‚¹ãƒ†ãƒ ãŒä¸€æ™‚çš„ã«æ­£å¸¸ã«ã©ã†ã•ã—ãªã„çŠ¶æ³ã§ã‚‚, é‡å¤§ãªå•é¡ŒãŒç”Ÿã˜ãªã„ã“ã¨
-   ä¿å®ˆæ€§ ... ã‚·ã‚¹ãƒ†ãƒ ãŒå®¹æ˜“ã«å›å¾©ã§ãã‚‹ã“ã¨.

ã‚·ã‚¹ãƒ†ãƒ ã®çŠ¶æ…‹ã«ã¤ã„ã¦

-   æ•…éšœ (fail): ã‚·ã‚¹ãƒ†ãƒ ãŒäºˆå®šã—ãŸè¡Œå‹•ã‚’ã¨ã‚Œãªããªã£ãŸå ´åˆ
-   ã‚¨ãƒ©ãƒ¼ (error): éšœå®³ã‚’å¼•ãèµ·ã“ã™ã‹ã‚‚ã—ã‚Œãªã„çŠ¶æ…‹.
    ã‚¨ãƒ©ãƒ¼ã®è¦å› ã‚’éšœå®³ (fault) ã¨ã„ã†.

ã‚·ã‚¹ãƒ†ãƒ åˆ¶å¾¡ã¨ã¯, ä»¥ä¸‹ã‚’ã•ã™.

-   éšœå®³ã‚’é˜²ã
-   éšœå®³ã‚’é™¤å»ã™ã‚‹
-   éšœå®³ã‚’äºˆæ¸¬ã™ã‚‹

éšœå®³ã¯ä»¥ä¸‹ã«åˆ†é¡ã•ã‚Œã‚‹

-   éæ¸¡éšœå®³ ... ä¸€åº¦ã ã‘ç™ºç”Ÿã—ã¦æ¶ˆæ»…ã™ã‚‹ã‚‚ã®
-   é–“æ¬ éšœå®³ ... ã—ã°ã—ã°ç™ºç”Ÿã™ã‚‹ã‚‚ã®
-   æ°¸ä¹…éšœå®³ ... æ¬ é™¥ãŒé™¤å»ã•ã‚Œã‚‹ã¾ã§ç¹°ã‚Šè¿”ã—å­˜åœ¨ã—ç¶šã‘ã‚‹ã‚‚ã®


### single point of failure {#single-point-of-failure}

å˜ä¸€éšœå®³ç‚¹. å†—é•·åŒ–ãŒã•ã‚Œã¦ã„ãªã„éƒ¨å“.


### å†—é•·åŒ– {#å†—é•·åŒ–}

-   ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

åŒã˜ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡è£½ã‚’è¤‡æ•°ç”¨æ„ã—,
ãã‚Œã‚‰å…¨éƒ¨ã«åŒã˜å‡¦ç†ã‚’ä¸¦åˆ—ã«å®Ÿè¡Œã•ã›, å®šè¶³æ•°ã‚’æº€è¶³ã—ãŸçµæœã‚’æ­£ã—ã„çµæœã¨ã—ã¦æ¡ç”¨ã™ã‚‹.

-   å†—é•·æ€§

åŒã˜ã‚·ã‚¹ãƒ†ãƒ ã®è¤‡è£½ã‚’è¤‡æ•°ç”¨æ„ã—, éšœå®³ãŒç™ºç”Ÿã—ãŸã‚‰äºˆå‚™ã®ã‚·ã‚¹ãƒ†ãƒ ã«åˆ‡ã‚Šæ›¿ãˆã‚‹.

-   å¤šæ§˜æ€§

åŒã˜ä»•æ§˜ã®ç•°ãªã‚‹å®Ÿè£…ã®ã‚·ã‚¹ãƒ†ãƒ ã‚’è¤‡æ•°ç”¨æ„ã—, ãƒ¬ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚ˆã†ã«ãã‚Œã‚’é‹ç”¨ã™ã‚‹.
ã“ã®å ´åˆ, å„ã‚·ã‚¹ãƒ†ãƒ ãŒåŒã˜éšœå®³ã‚’ç™ºç”Ÿã™ã‚‹ã“ã¨ãŒãªã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹.


## Communication Protocol Styles {#communication-protocol-styles}


### Multicast {#multicast}

æ±ºã‚ã‚‰ã‚ŒãŸè¤‡æ•°ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç«¯æœ« (ãƒãƒ¼ãƒ‰) ã«å¯¾ã—ã¦,
åŒæ™‚ã«ãƒ‘ã‚±ãƒƒãƒˆ (ãƒ‡ãƒ¼ã‚¿) ã‚’é€ä¿¡ã™ã‚‹äº‹.

-   [ãƒãƒ«ãƒã‚­ãƒ£ã‚¹ãƒˆ - Wikipedia](http://ja.wikipedia.org/wiki/%E3%83%9E%E3%83%AB%E3%83%81%E3%82%AD%E3%83%A3%E3%82%B9%E3%83%88)

ãƒãƒ«ãƒã‚­ãƒ£ã‚¹ãƒˆã¯ UDP ã‚’ä½¿ç”¨ã™ã‚‹.
ä¿¡é ¼æ€§ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹æƒ…å ±é€šä¿¡ã«ã¯å‘ã‹ãªã„.

Tree-Based Multicast ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã‚‚.
æœ€å°æ¢ç´¢æœ¨ã‚’ä½œæˆã—ã¦, Multicast.


#### Ordering {#ordering}

é †åºæ€§ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã« 3 ã¤ã®ä»£è¡¨çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒã‚ã‚‹.

-   FIFO ordering

Multicasts from each sender are received in
the order they are sent, at all receivers.

-   casual ordering

Multicasts whose send events are
causally related, must be received in the
same causality-obeying order at all receivers.

-   Total ordering


#### é«˜ä¿¡é ¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µãƒ¼ãƒé–“é€šä¿¡ {#é«˜ä¿¡é ¼ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µãƒ¼ãƒé–“é€šä¿¡}

RPC ã‚¨ãƒ©ãƒ¼ã®ãƒªã‚«ãƒãƒªæ–¹æ³•ã®ã¾ã¨ã‚. (åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ  p340)

-   ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒã®ä½ç½®ã‹ç‰¹å®šã§ããªã„å ´åˆ
-   ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰ã‚µãƒ¼ãƒã¸ã®è¦æ±‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå–ªå¤±ã—ãŸå ´åˆ
-   ã‚µãƒ¼ãƒãŒè¦æ±‚ã‚’å—ã‘ãŸã‚ã¨ã«ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã—ãŸå ´åˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«ã—ã‹ã¿ãˆãªã„. å¯¾å‡¦ã¯ 3 ã¤ã‚ã‚‹.
    -   at-least-once semantics æœ€ä½ä¸€å›ãƒªãƒˆãƒ©ã‚¤ã™ã‚‹
    -   at-most-once semantics ãƒªãƒˆãƒ©ã‚¤ã›ãšã«ç•°å¸¸ã‚’é€šçŸ¥
    -   ãªã«ã‚‚ã—ãªã„. ç•°å¸¸ã‚’ç„¡è¦–.

-   ã‚µãƒ¼ãƒã‹ã‚‰ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®è¦æ±‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå–ªå¤±ã—ãŸå ´åˆ
-   ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§è¦æ±‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡å¾Œã«éšœå®³ãŒèµ·ããŸå ´åˆ


#### é«˜ä¿¡é ¼ã‚°ãƒ«ãƒ¼ãƒ—é–“é€šä¿¡ {#é«˜ä¿¡é ¼ã‚°ãƒ«ãƒ¼ãƒ—é–“é€šä¿¡}

Reliable Multicalsing (åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ  p346).

Make sure that all of them receive the same updates
in the same order as each other.

<!--list-separator-->

-  ä»®æƒ³åŒæœŸ (Virtual Synchrony)


#### Gossip (Epidemic)-Style Multicast (Protocol) {#gossip--epidemic--style-multicast--protocol}

Gossip ã¯ã†ã‚ã•ã®ã“ã¨.
äººã®ã†ã‚ã•ãŒã‚ã£ã¨ã„ã†é–“ã«åºƒã¾ã‚‹ã®ã«ã¯ç†è«–çš„æ ¹æ‹ ãŒã‚ã£ãŸ.

Multicast ã«ã¯ä»¥ä¸‹ã®èª²é¡ŒãŒã‚ã‚‹

-   Nodes may crash
-   Packets may be dropped
-   1000's of nodes

Multicast é€šä¿¡ã§, ç‰¹å®šã®ã‚°ãƒ«ãƒ¼ãƒ—ã«æƒ…å ±ã‚’ä¼é”ã™ã‚‹ãŸã‚ã®ã‚ˆã„æ‰‹æ®µ.

-   epidemics ã¨ã‚‚å‘¼ã°ã‚Œã¦ã„ã‚‹.
-   é€Ÿã, ä¿¡é ¼æ€§ãŒã‚ã‚Š, ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«.
-   Amazon EC2, S3
-   Cassendra
-   NNTP

ã‚ã‚‹ãƒãƒ¼ãƒ‰ãŒé€šä¿¡ã‚’å—ä¿¡ã™ã‚‹ã¨,
ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã‚“ã  n ã¤ã®ãƒãƒ¼ãƒ‰ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹.

ã‚¦ãƒ¯ã‚µã‚„ä¼æŸ“ç—…ãŒåºƒã¾ã‚‹ã‚ˆã†ã«, æƒ…å ±ãŒä¼é”ã—ã¦ã„ã.

-   [Gossip protocol - Wikipedia, the free encyclopedia](http://en.wikipedia.org/wiki/Gossip_protocol)


### Unicast {#unicast}

ãƒ¦ãƒ‹ã‚­ãƒ£ã‚¹ãƒˆ.å˜ä¸€ã®é€ä¿¡ç›¸æ‰‹ã‚’æŒ‡å®šã—ã¦, ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹.
TCP ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒå¤šã„.


### Broadcast {#broadcast}

ä¸ç‰¹å®šå¤šæ•°ã®ãƒãƒ¼ãƒ‰ã«, åŒæ™‚ã«ãƒ‘ã‚±ãƒƒãƒˆã‚’é€ä¿¡ã™ã‚‹ã“ã¨.

-   [ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ - Wikipedia](http://ja.wikipedia.org/wiki/%E3%83%96%E3%83%AD%E3%83%BC%E3%83%89%E3%82%AD%E3%83%A3%E3%82%B9%E3%83%88)

é«˜ã‚³ã‚¹ãƒˆ.


## Leader Election {#leader-election}

é¸ä»»ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ .

é€šå¸¸, åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã§ã¯, Coordinator ãŒå­˜åœ¨ã™ã‚‹.
Coordinator ã§ç•°å¸¸ãŒç™ºç”Ÿã—ãŸã•ã„,
æ¬¡ã® Coordinator ã‚’æ±ºå®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹.

ã¾ãŸ, ç•°å¸¸ãª Coordinator ãŒå¾©æ—§ã—ãŸã¨ãã«
Coordinator ã‚’æˆ»ã™å¿…è¦ãŒã‚ã‚‹.

å¤å…¸çš„ãª Coordinator ã‚’æ±ºå®šã™ã‚‹ãŸã‚ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ä»¥ä¸‹.

-   Bully algorithm
-   Ring algorithm

å®Ÿéš›ã®å®Ÿè£…ä¾‹.

-   Google Chubby
-   Apatch ZooKeeper


### Bully Algorithm {#bully-algorithm}

Bully (ã‚¬ã‚­å¤§å°†) ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ . ã¤ã‚ˆã„ã‚‚ã®ãŒå‹ã¤ã¨ã„ã†ã‚‚ã®.

-   [CS 551: Synchronization, Bully Election Algorithm Example](http://www.cs.colostate.edu/~cs551/CourseNotes/Synchronization/BullyExample.html)
-   [Bully algorithm - Wikipedia, the free encyclopedia](http://en.wikipedia.org/wiki/Bully_algorithm)

3 ç¨®é¡ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹.

-   Election Message: Sent to announce faster election
-   Answer Message: Respond to the election message
-   Coordinator message: Sent to announce the identity of the elected process

æ‰‹é †ã¯ä»¥ä¸‹

1.  ã‚ã‚‹ãƒãƒ¼ãƒ‰ãŒ Master ã®ç•°å¸¸ã‚’æ¤œå‡ºã—ãŸã¨ã, Election ã‚’é–‹å‚¬ã™ã‚‹.
    Master ãŒç•°å¸¸çŠ¶æ…‹ã‹ã‚‰å¾©æ—§ã—ãŸã¨ãã‚‚, Election ã‚’é–‹å‚¬ã™ã‚‹.
2.  ã‚ã‚‹ãƒãƒ¼ãƒ‰ã¯è‡ªèº«ã‚ˆã‚Šã‚‚é«˜ã„ ID ã‚’ã‚‚ã¤ãƒãƒ¼ãƒ‰ã«ãŸã„ã—ã¦,
    Election Message ã‚’ãŠãã‚‹. (ç”Ÿå­˜å®£è¨€)
3.  Election Message ã‚’ã†ã‘ã¨ã£ãŸãƒãƒ¼ãƒ‰ã¯, Answer Message ã‚’ã‹ãˆã™.
    ãã—ã¦, è‡ªèº«ã‚ˆã‚Šã‚‚é«˜ã„ ID ã‚’ã‚‚ã¤ãƒãƒ¼ãƒ‰ã«ãŸã„ã—ã¦,
    Election Message ã‚’ãŠãã‚‹.
4.  2, 3 ãŒç¶šã„ãŸçµæœ, ã©ã®ãƒãƒ¼ãƒ‰ã‹ã‚‰ã‚‚å¿œç­”ãŒãªã„, é€ä¿¡ã™ã‚‹ãƒãƒ¼ãƒ‰ãŒãªã„å ´åˆã«, ãã®ãƒãƒ¼ãƒ‰ãŒ Master ã¨ãªã‚‹.
    Master ã¯ Coordinator messag ã‚’ãŠãã‚‹.


### Ring Algorithm {#ring-algorithm}

ãƒªãƒ³ã‚°ä¸Šã«ãƒãƒ¼ãƒ‰ã® ID ãŒå‰²ã‚ŠæŒ¯ã‚‰ã‚Œã‚‹.
ã‚ã‚‹ãƒãƒ¼ãƒ‰ã¯è‡ªèº«ã®ã¨ãªã‚Šã«ãªã‚‰ã¶ãƒãƒ¼ãƒ‰ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚‹.

ã¨ãªã‚Šã¨ãªã‚Šã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãŠãã‚‹ã“ã¨ã§, ãƒªãƒ³ã‚°ã‚’ä¸€å‘¨ã—ãŸã‚‰,
ãƒªãƒ³ã‚°ã‚’æ§‹æˆã™ã‚‹ãƒãƒ¼ãƒ‰ã®ç”Ÿå­˜ç¢ºèªãŒã¨ã‚Œã‚‹ã®ã§,
ã‚‚ã£ã¨ã‚‚é«˜ã„ ID ã‚’ã‚‚ã¤ãƒãƒ¼ãƒ‰ãŒ Master ã«ãªã‚‹.

-   [CS 551: Synchronization, Token Ring Election Algorithm Example](http://www.cs.colostate.edu/~cs551/CourseNotes/Synchronization/RingElectExample.html)


### Bookmarks {#bookmarks}

-   [Distributed Algorithms](http://www2.cs.uregina.ca/~hamilton/courses/330/notes/distributed/distributed.html)
-   <http://www.hpcs.cs.tsukuba.ac.jp/~msato/lecture-note/dsys-2014/lecture-dist-mutex.pdf>


## Failure detector {#failure-detector}

åˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã®ãƒãƒ¼ãƒ‰ã®ä¸­ã§, ç•°å¸¸æ¤œå‡ºã‚’æ‹…ã†ã‚‚ã®.

In distributed computing,
a failure detector is an application or a subsystem
that is responsible for detection of node failures
or crashes in a distributed system.

-   [Failure detector - Wikipedia, the free encyclopedia](http://en.wikipedia.org/wiki/Failure_detector)

ä»¥ä¸‹ã®è«–æ–‡ã§æå‡ºã•ã‚ŒãŸæ¦‚å¿µ.

-   [Unreliable failure detectors for reliable distributed systems](http://dl.acm.org/citation.cfm?coll=GUIDE&dl=GUIDE&id=226647)
-   [Chandra â€“ Toueg consensus algorithm - Wikipedia, the free encyclopedia](http://en.wikipedia.org/wiki/Chandra%E2%80%93Toueg_consensus_algorithm)

Failure Detector ã®è§£èª¬ã‚’å™›ã¿ç •ã„ã¦æ›¸ã„ã¦ã‚ã‚‹.

-   [FailureDetectors](http://www.cs.yale.edu/homes/aspnes/pinewiki/FailureDetectors.html)


### Failure Detector ã®ç•°å¸¸æ¤œå‡ºæ–¹æ³• {#failure-detector-ã®ç•°å¸¸æ¤œå‡ºæ–¹æ³•}

2 ç¨®é¡ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã—ã‹ãªã„.

Alive - Suspected - Failed ã¨ã„ã† 3 ã¤ã®çŠ¶æ…‹é·ç§»ãŒã‚ã‚‹.

æ•…éšœã—ãŸã‹ã‚’ç¢ºèªã™ã‚‹ã®ã«, ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã®ä»•çµ„ã¿ã‚’ä½¿ã†ã“ã¨ãŒå¤šã„


#### Ack-Ping Protocol {#ack-ping-protocol}

èƒ½å‹•çš„ã«ãƒ—ãƒ­ã‚»ã‚¹ãŒãŠäº’ã„ã«"ç”Ÿãã¦ã¾ã™ã‹"ã¨ã„ã†æ—¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã‚ã†.

-   A ã¯ B ã« T ç§’ã”ã¨ã« ping ã‚’æŠ•ã’ã‚‹.
-   B ã¯ A ã« ack ã‚’å¿œç­”ã™ã‚‹.
-   A ã¯ B ã‹ã‚‰ã®å¿œç­”ãŒ 2T ç§’ ä»¥å†…ãŒå¸°ã£ã¦ã“ãªã‘ã‚Œã°
    B ã‚’ç•°å¸¸ã¨åˆ¤æ–­. ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¯ 2T ä»¥å†….


#### Heartbeating Protocol {#heartbeating-protocol}

å—å‹•çš„ã«ç›¸æ‰‹ã‹ã‚‰ã®é€šä¿¡ã‚’ã¾ã¤.

-   B -&gt; A ã¸ T ç§’ã”ã¨ã« heartbeat ã‚’æŠ•ã’ã‚‹.
-   A ã¯ T ç§’ã”ã¨ã« heartbeat ã‚’å—ä¿¡ã™ã‚‹.
-   A ã¯ B ã‹ã‚‰ã® heartbeat ãŒ 3T ç§’é–“ãªã‘ã‚Œã°,
    A ã¯ B ã‚’ç•°å¸¸ã¨åˆ¤æ–­.


### Faulure Detector ã®ç‰¹å¾´ {#faulure-detector-ã®ç‰¹å¾´}

| Property     | Description                                      |
|--------------|--------------------------------------------------|
| Completeness | each failure is detected.                        |
| Accuracy     | there is no mistaken detection.                  |
| Speed        | Time to first detction of a failure.             |
| Scale        | Equal Load on each member/ Network Message Load. |
|              | (No bottlenecks, single failure point)           |


### HeartBeating {#heartbeating}

ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§, ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ©Ÿå™¨ãŒè‡ªèº«ãŒæ­£å¸¸ã«ç¨¼å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’å¤–éƒ¨ã«çŸ¥ã‚‰ã›ã‚‹ãŸã‚ã«é€ã‚‹ä¿¡å·.

-   [ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆã¨ã¯ ã€ heartbeat ã€‘ - æ„å‘³/ è§£èª¬/ èª¬æ˜/ å®šç¾© : IT ç”¨èªè¾å…¸](http://e-words.jp/w/E3838FE383BCE38388E38393E383BCE38388.html)

Keep-Alive ã¨ã‚‚ã„ã†.

å®Ÿæ–½æ–¹æ³•ã¯, ã„ã‚ã„ã‚.

-   Centralized Heartbeating
    -&gt; scale ã«ãŠã„ã¦ x.
-   Ring Heartbeating
    -&gt; Accuracy ã«ãŠã„ã¦ x
-   All-to-all Heartbeating
    -&gt; o
-   Gossip-Style Heartbeating
    -&gt; All-to-all ã‚ˆã‚Šã‚‚åŠ¹ç‡çš„.


#### Membership protocols {#membership-protocols}

ãƒ¡ãƒ³ãƒãƒªã‚¹ãƒˆã‚’äº’ã„ã«é€ä¿¡ã—ã‚ã£ã¦, åŒæœŸã‚’ã™ã‚‹æ–¹å¼.

-   Gossip-style
-   SWIM


#### Gossip-style Heartbeating {#gossip-style-heartbeating}

Better All-to-all Heartbeating.Probabilistic Failure Detector.

Multicast é€šä¿¡ã§, ç‰¹å®šã®ã‚°ãƒ«ãƒ¼ãƒ—ã«æƒ…å ±ã‚’ä¼é”ã™ã‚‹ãŸã‚ã®ã‚ˆã„æ‰‹æ®µ.

-   epidemics ã¨ã‚‚å‘¼ã°ã‚Œã¦ã„ã‚‹.
-   é€Ÿã, ä¿¡é ¼æ€§ãŒã‚ã‚Š, ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«.

ã™ã¹ã¦ã®ãƒãƒ¼ãƒ‰ã« heartbeat ã‚’ã™ã‚‹ã®ã§ã¯ãªã,
ãƒ©ãƒ³ãƒ€ãƒ ã«é¸å‡ºã—ãŸãƒãƒ¼ãƒ‰ã«å¯¾ã—ã¦ heartbeat ã‚’å®Ÿæ–½ã™ã‚‹.

Load (è² è·) ã¯ N ã«æ¯”ä¾‹ã—ãªã„ã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚‹.
ã¤ã¾ã‚Š, ã„ãã‚‰ã§ã‚‚ãƒãƒ¼ãƒ‰ã‚’å‹•çš„ã«æ‹¡å¼µã§ãã‚‹ã¨ã„ã†ã“ã¨.

Gossip ã¯ã†ã‚ã•ã®ã“ã¨.
äººã®ã†ã‚ã•ãŒã‚ã£ã¨ã„ã†é–“ã«åºƒã¾ã‚‹ã®ã«ã¯ç†è«–çš„æ ¹æ‹ ãŒã‚ã£ãŸ.

ã‚ã‚‹ãƒãƒ¼ãƒ‰ãŒé€šä¿¡ã‚’å—ä¿¡ã™ã‚‹ã¨,
ãƒ©ãƒ³ãƒ€ãƒ ã«é¸ã‚“ã  n ã¤ã®ãƒãƒ¼ãƒ‰ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹.

ã‚¦ãƒ¯ã‚µã‚„ä¼æŸ“ç—…ãŒåºƒã¾ã‚‹ã‚ˆã†ã«, æƒ…å ±ãŒä¼é”ã—ã¦ã„ã.

-   [Gossip protocol - Wikipedia, the free encyclopedia](http://en.wikipedia.org/wiki/Gossip_protocol)

Amazon EC2/S3 ã§åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹.


#### SWIM Membership Protocols {#swim-membership-protocols}

SWIM (ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«, å¼±ä¸€è²«æ€§ã®ã‚ã‚‹ãƒ—ãƒ­ã‚»ã‚¹Â·ã‚°ãƒ«ãƒ¼ãƒ—Â·ãƒ¡ãƒ³ãƒãƒ¼ã‚·ãƒƒãƒ—Â·ãƒ—ãƒ­ãƒˆã‚³ãƒ«)

direct-ping ã¨ indirect-ping ã®ä¸¡æ–¹ã‚’åˆ©ç”¨ã™ã‚‹.

ping-ack ãƒ™ãƒ¼ã‚¹ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«.

-   first detection time ãŒ ä¸€å®š.
-   process load ãŒä¸€å®š (Scalable)

ã ã‚Œã‹ã•ã‚“ã®å’Œè¨³.

-   <https://gist.github.com/masahitojp/8430314>


### Bookmarks {#bookmarks}

ãªã‚“ã‹, MOOC ã¨åŒã˜çµµãŒè¼‰ã£ã¦ã„ã‚‹ã‚¹ãƒ©ã‚¤ãƒ‰è¦‹ã¤ã‘ãŸ.

-   <http://www.cse.buffalo.edu/~stevko/courses/cse486/spring13/lectures/07-failure_detectors.pdf>


## Outage (åœé›») {#outage--åœé›»}

ä»¥ä¸‹ã®è¦å› ã§åœé›»ã«ã‚ã‚‹. 70%ã¯äººé–“ã®ãƒŸã‚¹ã§ç™ºç”Ÿã™ã‚‹.

-   Power outage
-   Over-heating
-   Human error
-   Fire
-   DOS Attack


## References {#references}


### Fault-tolerant Patterns {#fault-tolerant-patterns}

Fault-tolerant ã§åˆ©ç”¨ã•ã‚Œã‚‹æ¦‚å¿µãŒã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«ã¾ã¨ã¾ã£ã¦ã„ã‚‹.

-   <http://www.slideshare.net/ufried/no-crash-allowed-fault-tolerance-patterns>

Fault-tolerant ã®ãƒ‘ã‚¿ãƒ¼ãƒ³. POSA ã¨åŒã˜å‡ºç‰ˆç¤¾.

-   [Amazon.co.jp: Patterns for Fault Tolerant Software (Wiley Software Patterns Series) é›»å­æ›¸ç±: Robert Hanmer: Kindle ã‚¹ãƒˆã‚¢](http://www.amazon.co.jp/Patterns-Fault-Tolerant-Software-Series-ebook/dp/B00DXK33SK)

ä¸Šã®æœ¬ã®æ›¸è©•

-   [Patterns for Fault Tolerant Systems - copton](http://blogs.ethz.ch/copton/2009/06/26/patterns-for-fault-tolerant-systems/)

Pattern ã«ã¤ã„ã¦ã¾ã¨ã¾ã£ãŸ PDF.

-   <http://www.dcl.hpi.uni-potsdam.de/teaching/depend13/07_ftpatterns.pdf>
