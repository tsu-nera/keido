+++
title = "ğŸ“Clojure Web Development"
tags = ["WIKI"]
draft = false
+++

[ğŸ·Clojure]({{<relref "20211111225741.md#" >}}) ã«ã‚ˆã‚‹Webé–‹ç™ºãƒã‚¦ãƒã‚¦ã¾ã¨ã‚.

ãƒ†ãƒ¼ãƒãŒå¤§ãã„ã®ã§åˆ†å‰²ã™ã‚‹ã‹ã‚‚.


## References {#references}

-   ğŸ”—[ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæŒ‡å‘ã¨ã¯ã¾ã£ãŸãé•ã†Clojureã®ä¸–ç•Œã¨å®Ÿéš›ã®Webé–‹ç™º - ç´™ç®±](https://boxofpapers.hatenablog.com/entry/2018/06/24/160802)
-   ğŸ”—[Clojure ã§ Web é–‹ç™ºã‚’ã¯ã˜ã‚ã¦ã¿ã‚ˆã† â€” Clojure ã®æ—¥æœ¬èªã‚¬ã‚¤ãƒ‰](http://ayato-p.github.io/clojure-beginner/intro%5Fweb%5Fdevelopment/index.html)
-   [ğŸ”—Clojure x ClojureScript ã§æ·±ã‚ã‚‹ Web é–‹ç™º - Qiita](https://qiita.com/MeguruMokke/items/c6e059f109122be5f991)
    -   <https://github.com/MokkeMeguru/clj-web-dev-ja>
    -   <https://github.com/MokkeMeguru/portcard-api>


## Heroku with Clojure {#heroku-with-clojure}

-   <https://devcenter.heroku.com/articles/deploying-clojure>
    -   ja: <https://devcenter.heroku.com/ja/articles/deploying-clojure>
-   <https://devcenter.heroku.com/articles/getting-started-with-clojure>
    -   ja: <https://devcenter.heroku.com/ja/articles/getting-started-with-clojure>
-   <https://devcenter.heroku.com/articles/clojure-support>
    -   ja: <https://devcenter.heroku.com/ja/articles/clojure-support>

leiningenã®ä½œè€…ãŒHerokuã§åƒã„ã¦ãŸã‚‰ã—ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒã¦ã„ã­ã„ã¨ã‹.

<https://twitter.com/as%5Fchapa/status/1198104444711256064>
<https://twitter.com/iku000888/status/1099293410693808128>


### tip: Herokuä¸Šã®appã«replã§æ¥ç¶š {#tip-herokuä¸Šã®appã«replã§æ¥ç¶š}

heroku run lein replã§Herokuã‚µãƒ¼ãƒä¸Šã§replã‚’èµ·å‹•ã§ãã‚‹.

> heroku run lein repl


### howto: Heroku Deployã§lein depså¤±æ•—ã®å¯¾å‡¦æ–¹æ³• {#howto-heroku-deployã§lein-depså¤±æ•—ã®å¯¾å‡¦æ–¹æ³•}

> Leiningen 1.7.1 ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½¿ç”¨ã•ã‚Œã¾ã™ãŒã€project.clj ã« :min-lein-version
"2.0.0"â€‹ ãŒã‚ã‚‹å ´åˆã¯ (å¼·ãæ¨å¥¨ã•ã‚Œã¾ã™)ã€Leiningen 2.9.1 ãƒªãƒªãƒ¼ã‚¹ãŒä»£ã‚ã‚Šã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

ã“ã‚Œã«ãƒãƒã£ãŸ. project.cljã« :min-lein-version "2.0.0" ã‚’è¨˜è¼‰ã—ã¦è§£æ±ºâœ¨

ref: <https://devcenter.heroku.com/ja/articles/clojure-support>


### howto: Herokuä¸Šã§ Botã‚’å‹•ã‹ãã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ {#howto-herokuä¸Šã§-botã‚’å‹•ã‹ãã†ã¨ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼}

web appã§ã¯ãªã worker appã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹.

ãã†ã—ãªã„ã¨ 60secã§BootTimeoutã¨ã—ã¦æ‰±ã‚ã‚Œã¦Process Killã•ã‚Œã‚‹.

```text
2022-02-11T09:30:12.486217+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch
2022-02-11T09:30:12.581863+00:00 heroku[web.1]: Stopping process with SIGKILL
2022-02-11T09:30:12.834345+00:00 heroku[web.1]: Process exited with status 137
2022-02-11T09:30:13.225734+00:00 heroku[web.1]: State changed from starting to crashed
```

Procfileã‚’æ–°è¦ä½œæˆã—ã¦ä»¥ä¸‹ã‚’è¨˜è¼‰.

> worker: lein run

heroku cliã‚ˆã‚Š

> heroku ps:scale worker=1

ãŸã ã— workerã¯30åˆ†æ´»å‹•ãŒãªã„ã¨sleepã—ã¦ã—ã¾ã†.

å®Ÿéš›ã¯heroku schedulerã®æ´»ç”¨ã‚‚æ¤œè¨.


## Firebase with Clojure {#firebase-with-clojure}

[ğŸ·Firebase]({{<relref "20220215183442.md#" >}})

-   [ClojureScript + Firebase - DEV Community](https://dev.to/kbaba1001/clojurescript-firebase-3a26)
    -   ref: <https://twitter.com/kbaba1001/status/1342628846655324160>
-   [My PWA made with Clojure/ClojureScript exceeded 400 users ğŸ‰ - DEV Community](https://dev.to/boxp/my-pwa-made-with-clojure-clojurescript-exceeded-400-users-5co7)
    -   ref: <https://twitter.com/b0xp2/status/1259685025122930689>

ã›ã£ã‹ãã®Clojureãªã®ã§Clojure onlyã§é ‘å¼µã‚‰ãšã«Javaã‚„node.jsã®è³‡ç”£ã‚’æ´»ç”¨ã™ã‚‹æ–¹å‘ãŒã„ã„ã‹ãª...Javaè³‡ç”£æ´»ç”¨ã—ãªã„ã¨ãƒªãƒƒãƒãƒ¼ãƒ’ãƒƒã‚­ãƒ¼ã®é–‹ç™ºãƒ¢ãƒãƒ™ã«åã™ã‚‹ğŸ¤”

-   [Add the Firebase Admin SDK to your server Â |Â  Firebase Documentation](https://firebase.google.com/docs/admin/setup/)
-   [Get started with Cloud Firestore Â |Â  Firebase Documentation](https://firebase.google.com/docs/firestore/quickstart)

<https://github.com/tsu-nera/meigen-bot-firebase-clj>
