+++
title = "ğŸ“Clojure Java Interop"
tags = ["WIKI"]
draft = false
+++

up: [ğŸ“‚Clojure Core]({{< relref "20220112142936.md" >}}) refs: [ğŸ·Java]({{< relref "20220303203801.md" >}})

Clojureã¨Javaã®ã‚„ã‚Šã¨ã‚Šã‚’ã¾ã¨ã‚.


## Clojureã‹ã‚‰Javaã‚’å‘¼ã³å‡ºã— {#clojureã‹ã‚‰javaã‚’å‘¼ã³å‡ºã—}

-   ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶ã«ã¯ï¼Œãƒ¡ã‚½ãƒƒãƒ‰åã®å‰ã«.ã‚’æ›¸ã.
-   ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã«ã¯ï¼Œã‚¯ãƒ©ã‚¹åã®ã‚ã¨ã«.ã‚’æ›¸ã.


## Clojure-Java HashMap Interop {#clojure-java-hashmap-interop}


### howto: Clojure - Javaã®Hashmapã®å¤‰æ› {#howto-clojure-javaã®hashmapã®å¤‰æ›}

```clojure
(def java-map (java.util.HashMap. test-data))
(def clj-map  (into {} java-map))
```


### howto: Clojureã®keywordã‚’ stringã«ã™ã‚‹ã«ã¯ï¼Ÿ {#howto-clojureã®keywordã‚’-stringã«ã™ã‚‹ã«ã¯}

clojure.walkãƒ©ã‚¤ãƒ–ãƒ©ãƒªä½¿ãˆã‚‹. <https://clojuredocs.org/clojure.walk>

-   strinify-keys: keywords to string
-   keywordize-keys: string to keywords


## Clojure-Java Class {#clojure-java-class}


### howto: Javaã®classã‚’ç”Ÿæˆã™ã‚‹ã«ã¯? {#howto-javaã®classã‚’ç”Ÿæˆã™ã‚‹ã«ã¯}

ref: <https://clojure.org/reference/compilation>

namespaceã« (:gen-class)ã‚’è¨˜è¿°ã™ã‚‹.
namespaceã‚’æŒã¤ .classãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹.

default(AOT compile?) ã§ã¯ compileã™ã‚‹ã¨ãƒãƒ©ãƒãƒ©ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œ, .classãŒãªã„.

```text
drwxr-xr-x 3 tsu-nera tsu-nera 4.0K  2æœˆ 16 13:40  ClojureHelloWorld
-rw-r--r-- 1 tsu-nera tsu-nera 1.4K  2æœˆ 16 13:40 'ClojureHelloWorld$fn__273.class'
-rw-r--r-- 1 tsu-nera tsu-nera 1.1K  2æœˆ 16 13:40 'ClojureHelloWorld$fn__275$fn__276.class'
-rw-r--r-- 1 tsu-nera tsu-nera 1.3K  2æœˆ 16 13:40 'ClojureHelloWorld$fn__275.class'
-rw-r--r-- 1 tsu-nera tsu-nera 1.9K  2æœˆ 16 13:40 'ClojureHelloWorld$loading__6737__auto____271.class'
-rw-r--r-- 1 tsu-nera tsu-nera 1.1K  2æœˆ 16 13:40  ClojureHelloWorld.clj
-rw-r--r-- 1 tsu-nera tsu-nera 2.4K  2æœˆ 16 13:40  ClojureHelloWorld__init.class
```


### howto: Javaã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’Clojureã§ç¶™æ‰¿ã™ã‚‹ã«ã¯ï¼Ÿ {#howto-javaã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¹ã‚’clojureã§ç¶™æ‰¿ã™ã‚‹ã«ã¯}

**proxy** ãƒã‚¯ãƒ­ã‚’ã¤ã‹ã†.
ã“ã‚Œã¯Javaã®ã‚¯ãƒ©ã‚¹ã‚’å¼•æ•°ã«ã—ã¦ç„¡åã®ã‚µãƒ–ã‚¯ãƒ©ã‚¹ã‚’è¿”ã™ã®ã§é©å½“ãªå€¤ã«bindã™ã‚‹.

ref: <https://clojure.org/reference/java_interop#_implementing_interfaces_and_extending_classes>


## Active Recalls {#active-recalls}


### Clojureã‹ã‚‰Javaã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘¼ã³å‡ºã™ã«ã¯ï¼Ÿ {#clojureã‹ã‚‰javaã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘¼ã³å‡ºã™ã«ã¯}

ãƒ¡ã‚½ãƒƒãƒ‰åã®å‰ã«.ã‚’ãŠã„ã¦å‘¼ã³å‡ºã™. (.methodName )


### Clojureã‹ã‚‰Javaã®ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã«ã¯ï¼Ÿ {#clojureã‹ã‚‰javaã®ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆã«ã¯}

ã‚¯ãƒ©ã‚¹åã®ã‚ã¨ã«.ã‚’ãŠã„ã¦å‘¼ã³å‡ºã™. (Classname. )
